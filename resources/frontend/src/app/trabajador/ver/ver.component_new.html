<div mat-dialog-title class="mat-typography">
    <!--<div class="credential-loading-shade" *ngIf="isLoadingCredential">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar><br>
        <span>Cargando los datos de la credencial del empleado</span>
    </div>-->
    <div fxLayout="row wrap" fxLayoutGap="5px" *ngIf="!isLoadingCredential">
        <div fxFlex.xs="100" fxFlex="15" fxLayoutGap="10px">
            <div><img src="{{ fotoTrabajador }}" style="width: 100%; border-radius: 5%;" alt="Foto Trabajador"></div>
            <div style="font-size: 13pt; text-align: center; line-height: 15px;">
                {{ dataTrabajador.apellido_paterno + ' ' + dataTrabajador.apellido_materno + ' ' + dataTrabajador.nombre }}
            </div>

            <div style="font-size: 11pt; text-align: center; line-height: 36px;">
                {{ (dataTrabajador.rel_datos_laborales.cr_fisico)?dataTrabajador.rel_datos_laborales.cr_fisico.descripcion:'CR físico no asignado' }}
            </div>
            <mat-divider></mat-divider>
            <div fxLayout="row" fxLayoutGap="0px">
                <div fxFlex.xs="100" fxFlex="100" matTooltip="VALIDACIÓN DE TRABAJADOR DEL INSTITUTO DE SALUD">
                    <button mat-button color="primary"><mat-icon>check</mat-icon> VALIDADO</button>
                </div>
            </div>
            <div fxLayout="row" fxLayoutGap="0px">
                <div fxFlex.xs="100" fxFlex="100" matTooltip="DATOS ACTUALIZADOS">
                    <button mat-button color="primary"><mat-icon>history</mat-icon> ACTUALIZADO</button>
                </div>
            </div>
            <div fxLayout="row" fxLayoutGap="0px">
                <div fxFlex.xs="100" fxFlex="100" matTooltip="INTEGRACIÓN DEL EXPEDIENTE ELECTRÓNICO LABORAL">
                    <button mat-button color="warn"><mat-icon>picture_as_pdf</mat-icon> EXP. ELECTRÓNICO</button>
                </div>
            </div>
            <!--<div fxLayout="row" fxLayoutGap="0px" *ngIf="!isLoadingCredential">
                <div fxFlex.xs="100" fxFlex="33" matTooltip="VALIDADO" style="background-color: rgba(58, 142, 41, 0.71); text-align: center;">
                    <mat-icon style="color: white; padding: 5px;">check</mat-icon>
                </div>
                <div fxFlex.xs="100" fxFlex="33" matTooltip="ACTUALIZADO" style="background-color: rgba(58, 142, 41, 0.71);; text-align: center;">
                    <mat-icon style="color: white; padding: 5px;">history</mat-icon>
                </div>
                <div fxFlex.xs="100" fxFlex="33" matTooltip="EXPEDIENTE ELECTRÓNICO" style="background-color: rgba(142, 41, 41, 0.71);; text-align: center;">
                    <mat-icon style="color: white; padding: 5px;">picture_as_pdf</mat-icon>
                </div>
            </div>-->

            <mat-divider></mat-divider>
            <!--<div>
                <section>
                    <div class="example-button-row" style="text-align: center;">
                        <div class="example-flex-container">
                            <button mat-icon-button matTooltip="DATOS GENERALES" color="primary" aria-label="Example icon button with a vertical three dot icon">
                                <mat-icon>perm_contact_calendar</mat-icon>
                            </button>
                            <button mat-icon-button matTooltip="ESCOLARIDAD" color="primary" aria-label="Example icon button with a home icon">
                                <mat-icon>school</mat-icon>
                            </button>
                            <button mat-icon-button color="primary" matTooltip="REGISTRO DE ASISTENCIA" aria-label="Example icon button with a menu icon">
                            <mat-icon>fingerprint</mat-icon>
                            </button>
                            <button mat-icon-button color="primary" matTooltip="TRAMITES" aria-label="Example icon button with a heart icon">
                            <mat-icon>file_present</mat-icon>
                            </button>
                        </div>
                    </div>
                </section>
            </div>-->
        </div>
        <mat-divider></mat-divider>
        <div fxFlex.xs="100" fxFlex="78" *ngIf="dataTrabajador">
            <mat-tab-group fxFlex.xs="100" fxFlex="100" dynamicHeight animationDuration="0ms" (selectedTabChange)="dataTabChange($event)" [(selectedIndex)]="navTabSelected" [color]="'accent'" [backgroundColor]="'primary'">
                <mat-tab label="Datos Generales">
                    <ng-template mat-tab-label>
                        <mat-icon class="example-tab-icon">perm_contact_calendar</mat-icon>
                        <div class="mobile-pc"> Datos Generales</div>
                    </ng-template>
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="10px">
                        <div fxFlex="49" fxFlex.xs="100">
                            <mat-card>
                                <mat-card-title>Datos Personales</mat-card-title>
                                <mat-card-content>
                                    <div fxLayout="row" fxLayout.xs="column" class="linea_registro">
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>CURP:</b> {{ dataTrabajador.curp }}
                                        </div>
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>RFC:</b> {{ dataTrabajador.rfc }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column">
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>SEXO:</b> {{ (dataTrabajador.sexo)? dataTrabajador.sexo.descripcion: 'NO REGISTRADO' }}
                                        </div>
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>ESTADO CIVIL:</b> {{ (dataTrabajador.estado_conyugal)? dataTrabajador.estado_conyugal.descripcion: 'NO REGISTRADO' }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column" class="linea_registro">
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>NACIONALIDAD:</b> {{ (dataTrabajador.nacionalidad)? dataTrabajador.nacionalidad.descripcion: 'NO REGISTRADO' }}
                                        </div>
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>PAIS NACIMIENTO:</b> {{ (dataTrabajador.pais_nacimiento)? dataTrabajador.pais_nacimiento.descripcion: 'NO REGISTRADO' }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column">
                                        <div fxFlex="100" fxFlex.xs="100">
                                            <b>ESTADO NACIMIENTO:</b> {{ (dataTrabajador.entidad_nacimiento)? dataTrabajador.entidad_nacimiento.descripcion: 'NO REGISTRADO' }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column" class="linea_registro">
                                        <div fxFlex="100" fxFlex.xs="100">
                                            <b>MUNICIPIO NACIMIENTO:</b> {{ (dataTrabajador.municipio_nacimiento)? dataTrabajador.municipio_nacimiento.descripcion: 'NO REGISTRADO' }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column">
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>TELÉFONO FIJO:</b> {{ (dataTrabajador.telefono_fijo)?dataTrabajador.telefono_fijo:'NO REGISTRADO' }}
                                        </div>
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>TELÉFONO CELULAR:</b> {{ dataTrabajador.telefono_celular }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column" class="linea_registro">
                                        <div fxFlex="100" fxFlex.xs="100">
                                            <b>CORREO:</b> {{ (dataTrabajador.correo_electronico!='')?dataTrabajador.correo_electronico:'NO REGISTRADO' }}
                                        </div>

                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column">
                                        <div fxFlex="100" fxFlex.xs="100">
                                            <b>DIRECCIÓN:</b> {{ dataTrabajador.calle }} {{ (dataTrabajador.no_exterior)? '#'+dataTrabajador.no_exterior:'' }} {{ (dataTrabajador.no_interior)? 'Int. '+dataTrabajador.no_exterior:'' }} {{ (dataTrabajador.colonia)?
                                            'Col. '+dataTrabajador.colonia:'' }} {{ (dataTrabajador.cp)? 'C.P. '+dataTrabajador.cp:'' }}
                                        </div>

                                    </div>
                                </mat-card-content>
                            </mat-card>

                        </div>
                        <div fxFlex="49" fxFlex.xs="100">
                            <mat-card>
                                <mat-card-title>Datos Laborales</mat-card-title>
                                <mat-card-content>
                                    <div fxLayout="row" fxLayout.xs="column" class="linea_registro">
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>INGRESO SSA:</b>
                                            <BR>{{ dataTrabajador.rel_datos_laborales.fecha_ingreso }}
                                        </div>
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>INGRESO GOBIERNO FEDERAL:</b> <br>{{ dataTrabajador.rel_datos_laborales.fecha_ingreso_federal }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column">
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>UR:</b> {{ (dataTrabajador.rel_datos_laborales_nomina)?dataTrabajador.rel_datos_laborales_nomina.ur:'NO REGISTRADO' }}
                                        </div>
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>RAMA:</b> {{ (dataTrabajador.rel_datos_laborales.rama)?dataTrabajador.rel_datos_laborales.rama.descripcion:'NO REGISTRADO'}}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column" class="linea_registro">
                                        <div fxFlex="100" fxFlex.xs="100">
                                            <b>CODIGO:</b> {{ (dataTrabajador.rel_datos_laborales_nomina)?dataTrabajador.rel_datos_laborales_nomina.codigo.codigo:'NO REGISTRADO'}} {{ (dataTrabajador.rel_datos_laborales_nomina)?dataTrabajador.rel_datos_laborales_nomina.codigo.descripcion:''
                                            }}
                                        </div>

                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column">
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>SEGUTO RETIRO:</b> {{ (dataTrabajador.rel_datos_laborales.seguro_retiro == 1)?'SI':'NO' }}
                                        </div>
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>SEGURO DE SALUD:</b> {{ (dataTrabajador.rel_datos_laborales.seguro_salud == 1)?'SI':'NO' }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column" class="linea_registro">
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>FIRMA ELECTRÓNICA:</b> {{ (dataTrabajador.rel_datos_laborales.tiene_fiel == 1)?'SI':'NO' }}
                                        </div>
                                        <div fxFlex="50" fxFlex.xs="100">
                                            <b>LICENCIA MATERNIDAD:</b> {{ (dataTrabajador.rel_datos_laborales.licencia_maternidad == 1)?'SI':'NO' }}
                                        </div>
                                    </div>
                                    <div fxLayout="row" fxLayout.xs="column">
                                        <div fxFlex="100" fxFlex.xs="100">
                                            <b>CENTRO DE RESPONSABILIDAD (ADSCRIPCIÓN):</b><br> {{ (datosNominales)?(datosNominales.cr)?datosNominales.cr.clues:'NO REGISTRADO':'NO REGISTRADO' }} {{ (datosNominales)?(datosNominales.cr)?datosNominales.cr.descripcion:'':''
                                            }}
                                        </div>

                                    </div>

                                </mat-card-content>
                            </mat-card>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="10px">
                        <div fxFlex="100" fxFlex.xs="100">

                        </div>
                    </div>

                </mat-tab>
                <mat-tab label="ASISTENCIA">
                    <ng-template mat-tab-label>
                        <mat-icon class="example-tab-icon">fingerprint</mat-icon>
                        <div class="mobile-pc"> ASISTENCIA</div>
                    </ng-template>
                    <ng-template mat-tab-label>
                        <mat-icon class="example-tab-icon">fingerprint</mat-icon>
                        <div class="mobile-pc"> Registro Asistencia</div>
                    </ng-template>
                    <div class="loading-shade" *ngIf="isLoadingAsistencia">
                        <mat-spinner mode="indeterminate" *ngIf="isLoadingAsistencia"></mat-spinner>
                    </div>
                    <br>
                    <div *ngIf="!Asitencia">
                        Para tener acceso a verificar tu asistencia, debe de completar toda tu información:
                        <ul>
                            <li>Datos personales</li>
                            <li>Datos Laborales</li>
                            <li>Horario labolal</li>
                            <li>Escolaridad</li>
                        </ul>
                        <b>*Nota:</b> Para completar tu información debes de tener:
                        <ul>
                            <li>Nombre de la institución educativa, nombre de la carrera cursada, número de cédula si se cuenta con ella (de todos los estudios que cuente).</li>
                            <li>Fecha de vigencia de la FIEL (Firma electrónica avanzada)</li>
                        </ul>
                        Por default el municipio de nacimiento aparece "sin especificar", se debe de modificar, seleccionando de la lista desplegable que aparecerá cuando este escribiendo el nombre del municipio.
                        <br> Para continual debe de dar clic sobre el boton <b style="color:red">Editar</b>
                        <br><br> Puede ver el video tutorial de registro basico de la información en el siguiente link dar clic <a href="https://n9.cl/pyx9" target="_blank">Aquí</a>
                    </div>

                    <div *ngIf="!validadorEstudios">
                        Para tener acceso a verificar tu asistencia, debe de completar toda tu información:
                        <ul>
                            <li>Escolaridad</li>
                        </ul>
                        <b>*Nota:</b> Debe de ingresar todos y cada unos de tus estudios.
                    </div>

                    <section fxLayout="row wrap" fxLayoutGap="10px" *ngIf="!isLoadingAsistencia && Asitencia && validadorEstudios">
                        <mat-form-field fxFlex="20" fxFlex.xs="45">
                            <input matInput [matDatepicker]="fechaInicioAsistPicker" placeholder="Fecha Inicio" [(ngModel)]="fechaInicioAsist" readonly [ngModelOptions]="{standalone: true}">
                            <mat-datepicker-toggle matSuffix [for]="fechaInicioAsistPicker"></mat-datepicker-toggle>
                            <mat-datepicker #fechaInicioAsistPicker disabled="false"></mat-datepicker>
                            <mat-hint align="end">seleccionar fecha
                                <mat-icon>keyboard_arrow_up</mat-icon>&nbsp;</mat-hint>
                        </mat-form-field>
                        <mat-form-field fxFlex="20" fxFlex.xs="45">
                            <input matInput [matDatepicker]="fechaFinAsistPicker" placeholder="Fecha Fin" [(ngModel)]="fechaFinAsist" readonly [ngModelOptions]="{standalone: true}">
                            <mat-datepicker-toggle matSuffix [for]="fechaFinAsistPicker"></mat-datepicker-toggle>
                            <mat-datepicker #fechaFinAsistPicker disabled="false"></mat-datepicker>
                            <mat-hint align="end">seleccionar fecha
                                <mat-icon>keyboard_arrow_up</mat-icon>&nbsp;</mat-hint>
                        </mat-form-field>
                        <button fxFlex fxFlex.xs="45" mat-raised-button color="accent" (click)="buscarFechasAssitencia()"><mat-icon>search</mat-icon></button>
                        <div fxFlex="40" fxFlex.xs="45" class="tarjeta-info-empleado">
                            <p class="mat-typography" *ngIf="verifData" style="margin-top:0px;">
                                <span class="label">ID: </span><span class="value">{{ verifData.id }}</span><br>
                                <span class="label">Faltas: </span><span class="value">{{ verifData.faltas }}</span><br>
                                <span class="label">Retardos: </span><span class="value">{{ verifData.retardos }}</span><br>
                            </p>
                        </div>
                        <button fxFlex mat-raised-button color="info" [class.button-spinner]="isLoadingPDF" [disabled]="isLoadingPDF" (click)="reporteAsistencias()"><mat-icon>insert_drive_file</mat-icon></button>
                    </section>
                    <div class="asistencia-table-container" *ngIf="!isLoadingAsistencia && Asitencia && validadorEstudios">
                        <table #asistenciaTable mat-table [dataSource]="assistSource" class="data-table" matSort>
                            <ng-container matColumnDef="dia">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Dia </th>
                                <td mat-cell *matCellDef="let row"> {{ daysLabels[row.numero_dia] }} </td>
                            </ng-container>

                            <ng-container matColumnDef="fecha">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha </th>
                                <td mat-cell *matCellDef="let row"> {{row.fecha}} </td>
                            </ng-container>

                            <ng-container matColumnDef="hora_entrada">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header fxHide.xs="true"> Hora Entrada </th>
                                <td mat-cell *matCellDef="let row" fxHide.xs="true"> {{row.checado_entrada}} <span matTooltip="Entrada Fuera de Horario" *ngIf="row.checado_entrada == 'SIN REGISTRO'" style="display:block; color:red;">[ {{(row.checado_entrada_fuera)?row.checado_entrada_fuera:'--:--'}} ]</span></td>
                            </ng-container>

                            <ng-container matColumnDef="hora_salida">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header fxHide.xs="true"> Hora Salida </th>
                                <td mat-cell *matCellDef="let row" fxHide.xs="true"> {{row.checado_salida}} <span matTooltip="Salida Fuera de Horario" *ngIf="row.checado_salida == 'SIN REGISTRO'" style="display:block; color:red;">[ {{(row.checado_salida_fuera)?row.checado_salida_fuera:'--:--'}} ]</span></td>
                            </ng-container>

                            <ng-container matColumnDef="justificado">
                                <th mat-header-cell *matHeaderCellDef>Justificado</th>
                                <td mat-cell width="1" *matCellDef="let row; let i = index">
                                    <mat-icon [color]="(row.validacion)?'primary':'warn'">{{(row.validacion)?'check_circle':'remove_circle'}}</mat-icon>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="noResultsFound">
                                <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedScheduleColumns.length">
                                    No se encontraron registros
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedScheduleColumns; sticky: true"></tr>
                            <tr mat-row *matRowDef="let row; let i = index; columns: displayedScheduleColumns;"></tr>

                            <tr mat-footer-row *matFooterRowDef="['noResultsFound']" class="not-results-found" [ngClass]="{'hide':!(assistSource!=null && assistSource.length==0)}"></tr>
                        </table>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </div>
        <div fxFlex.xs="100" fxFlex="5" *ngIf="dataTrabajador">
            <button mat-raised-button matTooltip="EDITAR" color="warn" style="height: 50px; width: 100%; margin-bottom: 5px;">
                <mat-icon>edit</mat-icon>
            </button>

            <button mat-raised-button matTooltip="SALIR" color="primary" style="height: 50px; width: 100%;">
                <mat-icon>close</mat-icon>
            </button>
        </div>
    </div>
</div>