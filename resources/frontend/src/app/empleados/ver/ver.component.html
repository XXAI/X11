<div mat-dialog-content>
    <section fxLayout="column">
        <section fxFlex="100">
            <mat-card>
                <div class="credential-loading-shade" *ngIf="isLoadingCredential">
                    <mat-progress-bar mode="indeterminate"></mat-progress-bar><br>
                    <span>Cargando los datos de la credencial del empleado</span>    
                </div>

                <div *ngIf="!isLoadingCredential && !datosCredencial" style="text-align: center;">
                    <span>No se encontraron los datos de la credencial de este empleado</span><br>
                    <button mat-button color="primary"><mat-icon>refresh</mat-icon> Recargar los Datos</button>
                </div>
                
                <div fxLayout="row"  *ngIf="!isLoadingCredential && datosCredencial">
                    <div fxFlex="20" fxLayout="column">
                        <div fxFlex>
                            <img mat-card-image style="width:100%; margin:0 auto 0 auto; border-radius: 50%; max-height: 162px;" src="{{datosCredencial.photo}}" alt="">
                        </div>
                    </div>
                    <div fxFlex="80"  fxLayout="column" >
                        <div fxFlex>
                            <h3>{{datosCredencial.Nombre}} - {{datosCredencial.Adscripcion_Area}}</h3>
                        </div>
                        <div fxFlex fxLayout="row wrap" class="info-credential">
                            <mat-form-field fxFlex="25">
                                <input matInput placeholder="CLUES"  value="{{datosCredencial.clues}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="25">
                                <input matInput placeholder="RFC"  value="{{datosCredencial.Rfc}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="50">
                                <input matInput placeholder="CURP"  value="{{datosCredencial.Curp}}" readonly>
                            </mat-form-field>
                        </div>
                        <div fxFlex fxLayout="row">
                            <div fxFlex></div>
                            <button mat-raised-button (click)="editarEmpleado()" color="accent"><mat-icon>edit</mat-icon> Editar</button>
                        </div>
                    </div>
                </div>
                
                <!--mat-card-content fxLayout="column" >
                </mat-card-content-->
            </mat-card>
        </section>
        <section fxFlex="100">
            <div class="loading-shade" *ngIf="isLoading"><mat-spinner *ngIf="isLoading"></mat-spinner></div>
            <div class="loading-shade" *ngIf="!isLoading && !dataEmpleado">No se encontraron los datos del empleado</div>
            <section *ngIf="!isLoading && dataEmpleado">
                <mat-tab-group dynamicHeight animationDuration="0ms" (selectedTabChange)="dataTabChange($event)"  [(selectedIndex)]="navTabSelected">
                    <mat-tab label="Datos Laborales">
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                            <mat-form-field fxFlex="20" fxFlex.xs="100">
                                <input matInput placeholder="Ingreso al Gob. Fed." value="{{dataEmpleado.figf}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="20" fxFlex.xs="100">
                                <input matInput placeholder="Ingreso a la SSA" value="{{dataEmpleado.fissa}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="30" fxFlex.xs="100">
                                <input matInput placeholder="Turno" value="{{(dataEmpleado.turno)?dataEmpleado.turno.descripcion:'--'}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="15" fxFlex.xs="100">
                                <input matInput placeholder="Hora Entrada" value="{{dataEmpleado.hora_entrada}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="15" fxFlex.xs="100">
                                <input matInput placeholder="Hora Salida" value="{{dataEmpleado.hora_salida}}" readonly>
                            </mat-form-field>
                        </div>
                        <section fxLayout="column">
                            <table class="info-adscripcion-activa mat-elevation-z1" *ngIf="(dataEmpleado && dataEmpleado.clues)">
                                <tr><th class="titulo-largo" width="1">CLUES</th><th class="titulo-largo">Nombre</th></tr>
                                <tr>
                                    <td class="descripcion">
                                        {{dataEmpleado.clues.clues}}
                                    </td>
                                    <td class="descripcion">
                                        {{dataEmpleado.clues.nombre_unidad}}
                                    </td>
                                </tr>
                                <tr><th class="titulo-largo">CR:</th><th class="titulo-largo">Área</th></tr>
                                <tr>
                                    <td class="descripcion">{{(dataEmpleado.cr)?dataEmpleado.cr.cr:'Sin CR Asignado'}}</td>
                                    <td class="descripcion">
                                        {{(dataEmpleado.cr)?dataEmpleado.cr.descripcion:'Sin CR Asignado'}}
                                    </td>
                                </tr>
                            </table>
                            <br>
                        </section>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                            <mat-form-field fxFlex="25" fxFlex.xs="100">
                                <input matInput placeholder="RFC" value="{{dataEmpleado.rfc}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="25" fxFlex.xs="100">
                                <input matInput placeholder="CURP" value="{{dataEmpleado.curp}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="10" fxFlex.xs="100">
                                <input matInput placeholder="Sexo" value="{{(dataEmpleado.sexo == 1)?'Hombre':'Mujer'}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="15" fxFlex.xs="100">
                                <input matInput placeholder="Nacionalidad" value="{{dataEmpleado.nacionalidad}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="25" fxFlex.xs="100">
                                <input matInput placeholder="Estado Nacimiento" value="{{dataEmpleado.estado_nacimiento}}" readonly>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                            <mat-form-field fxFlex="33" fxFlex.xs="100">
                                <input matInput placeholder="Nombre" value="{{dataEmpleado.nombre}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="33" fxFlex.xs="100">
                                <input matInput placeholder="Apellido Paterno" value="{{dataEmpleado.apellido_paterno}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="33" fxFlex.xs="100">
                                <input matInput placeholder="Apellido Materno" value="{{dataEmpleado.apellido_materno}}" readonly>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                            <mat-form-field fxFlex="25" fxFlex.xs="100">
                                <input matInput placeholder="Telefono Fijo" value="{{dataEmpleado.fijo}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="25" fxFlex.xs="100">
                                <input matInput placeholder="Telefono Celular" value="{{dataEmpleado.telefono_celular}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="50" fxFlex.xs="100">
                                <input matInput placeholder="Correo Personal" value="{{dataEmpleado.correo_personal}}" readonly>
                            </mat-form-field>
                        </div>    
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                            <mat-form-field fxFlex="30" fxFlex.xs="100">
                                <input matInput placeholder="Tipo Trabajador" value="{{(dataEmpleado.tipo_trabajador)?dataEmpleado.tipo_trabajador.descripcion:'--'}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="30" fxFlex.xs="100">
                                <input matInput placeholder="UR" value="{{(dataEmpleado.ur)?dataEmpleado.ur.descripcion:'--'}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="40" fxFlex.xs="100">
                                <input matInput placeholder="Programa" value="{{(dataEmpleado.programa)?dataEmpleado.programa.descripcion:'--'}}" readonly>
                            </mat-form-field>
                        </div>    
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                            <mat-form-field fxFlex="25" fxFlex.xs="100">
                                <input matInput placeholder="Rama" value="{{(dataEmpleado.rama)?dataEmpleado.rama.descripcion:'--'}}" readonly>
                            </mat-form-field>

                            <mat-form-field fxFlex="75" fxFlex.xs="100">
                                <input matInput placeholder="Area Servicio" value="{{dataEmpleado.area_servicio}}" readonly>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column">
                            <mat-form-field fxFlex="100" fxFlex.xs="100">
                                <mat-label>Actividades</mat-label>
                                <textarea matInput readonly>{{dataEmpleado.actividades}}</textarea>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                            <mat-form-field fxFlex="65" fxFlex.xs="100">
                                <input matInput placeholder="Codigo" value="{{dataEmpleado.codigo.descripcion}}" readonly>
                                <mat-hint align="start" *ngIf="dataEmpleado.codigo">[{{dataEmpleado.codigo.grupo_funcion.grupo}}]</mat-hint>
                                <mat-hint align="end" *ngIf="dataEmpleado.codigo">[{{dataEmpleado.codigo.codigo}}]</mat-hint>
                            </mat-form-field>
                            <mat-form-field fxFlex="35" fxFlex.xs="100">
                                <input matInput placeholder="Máximo Grado de Estudios" value="{{(dataEmpleado.max_grado_estudio)?dataEmpleado.max_grado_estudio.descripcion:'--'}}" readonly>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                            <mat-form-field fxFlex="40" fxFlex.xs="100">
                                <input matInput placeholder="Calle" value="{{dataEmpleado.calle}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="10" fxFlex.xs="100">
                                <input matInput placeholder="No. Ext." value="{{dataEmpleado.no_exterior}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="10" fxFlex.xs="100">
                                <input matInput placeholder="No. Int." value="{{dataEmpleado.no_interior}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="25" fxFlex.xs="100">
                                <input matInput placeholder="Colonia" value="{{dataEmpleado.colonia}}" readonly>
                            </mat-form-field>
                            <mat-form-field fxFlex="15" fxFlex.xs="100">
                                <input matInput placeholder="Código Postal" value="{{dataEmpleado.cp}}" readonly>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column">
                            <mat-form-field fxFlex="100" fxFlex.xs="100">
                                <mat-label>Observaciones</mat-label>
                                <textarea matInput readonly>{{dataEmpleado.observaciones}}</textarea>
                            </mat-form-field>
                        </div>
                    </mat-tab>
                    <!--mat-tab label="Detalle de Estudio">
                    </mat-tab>
                    <mat-tab label="Datos Comisión">
                    </mat-tab-->
                    <mat-tab label="Registro Asistencia">
                        <div class="loading-shade" *ngIf="isLoadingAsistencia">
                            <mat-spinner mode="indeterminate" *ngIf="isLoadingAsistencia"></mat-spinner>
                        </div>
                        <br>
                        <section fxLayout="row" fxLayoutGap="5px" *ngIf="!isLoadingAsistencia">
                            <mat-form-field fxFlex="45">
                                <input matInput [matDatepicker]="fechaInicioAsistPicker" placeholder="Fecha Inicio"  [(ngModel)]="fechaInicioAsist" readonly [ngModelOptions]="{standalone: true}">
                                <mat-datepicker-toggle matSuffix [for]="fechaInicioAsistPicker"></mat-datepicker-toggle>
                                <mat-datepicker #fechaInicioAsistPicker disabled="false"></mat-datepicker>
                                <mat-hint align="end">seleccionar fecha <mat-icon>keyboard_arrow_up</mat-icon>&nbsp;</mat-hint>
                            </mat-form-field>
                            <mat-form-field fxFlex="40">
                                <input matInput [matDatepicker]="fechaFinAsistPicker" placeholder="Fecha Fin"  [(ngModel)]="fechaFinAsist" readonly [ngModelOptions]="{standalone: true}">
                                <mat-datepicker-toggle matSuffix [for]="fechaFinAsistPicker"></mat-datepicker-toggle>
                                <mat-datepicker #fechaFinAsistPicker disabled="false"></mat-datepicker>
                                <mat-hint align="end">seleccionar fecha <mat-icon>keyboard_arrow_up</mat-icon>&nbsp;</mat-hint>
                            </mat-form-field>
                            <button fxFlex mat-raised-button color="accent" (click)="buscarFechasAssitencia()">Buscar</button>
                        </section>
                        <div class="asistencia-table-container" *ngIf="!isLoadingAsistencia">
                            <table #asistenciaTable mat-table [dataSource]="assistSource" class="data-table" matSort>
                                <!-- ID Column -->
                                <ng-container matColumnDef="dia">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Dia </th>
                                    <td mat-cell *matCellDef="let row"> {{ daysLabels[row.numero_dia] }} </td>
                                </ng-container>
                        
                                <!-- Username Column -->
                                <ng-container matColumnDef="fecha">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha </th>
                                    <td mat-cell *matCellDef="let row"> {{row.fecha}} </td>
                                </ng-container>
                        
                                <!-- Name Column -->
                                <ng-container matColumnDef="hora_entrada" >
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Hora Entrada </th>
                                    <td mat-cell *matCellDef="let row"> {{row.checado_entrada}} <span matTooltip="Entrada Fuera de Horario" *ngIf="row.checado_entrada == 'SIN REGISTRO'" style="display:block; color:red;">[ {{(row.checado_entrada_fuera)?row.checado_entrada_fuera:'--:--'}} ]</span></td>
                                </ng-container>
                        
                                <!-- Email Column -->
                                <ng-container matColumnDef="hora_salida" >
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Hora Salida </th>
                                    <td mat-cell *matCellDef="let row"> {{row.checado_salida}} <span matTooltip="Salida Fuera de Horario" *ngIf="row.checado_salida == 'SIN REGISTRO'" style="display:block; color:red;">[ {{(row.checado_salida_fuera)?row.checado_salida_fuera:'--:--'}} ]</span></td>
                                </ng-container>
    
                                <ng-container matColumnDef="justificado">
                                    <th mat-header-cell *matHeaderCellDef>Justificado</th>
                                    <td mat-cell width="1" *matCellDef="let row; let i = index"> <mat-icon [color]="(row.validacion)?'primary':'warn'">{{(row.validacion)?'check_circle':'remove_circle'}}</mat-icon> </td>
                                </ng-container>
    
                                <ng-container matColumnDef="noResultsFound">
                                    <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedScheduleColumns.length">
                                        No se encontraron registros 
                                    </td>
                                </ng-container>
                                
                                <tr mat-header-row *matHeaderRowDef="displayedScheduleColumns; sticky: true"></tr>
                                <tr mat-row *matRowDef="let row; let i = index; columns: displayedScheduleColumns;"></tr>
    
                                <tr mat-footer-row *matFooterRowDef="['noResultsFound']" class="not-results-found" [ngClass]="{'hide':!(assistSource!=null && assistSource.length==0)}"></tr>
                            </table>                                        
                        </div>
                        <mat-hint><small>{{verifData}}</small></mat-hint>
                    </mat-tab>
                </mat-tab-group>
            </section>
        </section>
    </section>
</div>
<div mat-dialog-actions>
    <span fxFlex></span>
    <button mat-button (click)='cancel()'>Cerrar</button>
</div>